---
title: Setup & installation
description: Install prerequisites and build the Hoku binaries.
---

import { Callout, Cards, Card, FileTree, Steps, Tabs } from "nextra/components";

This page outlines how to install the necessary dependencies that precede building and installing
the underlying Hoku binaries. If you already have these installed on your machine, you can proceed
to the [local development](/operators/local) page.

## Background

There are three ways to use these scripts:

1. Run a local network with three nodes and Anvil as the root chain (`localnet`).
2. Run a remote network with three nodes and Filecoin Calibration as the root chain (`testnet`).
3. Run a local network without any root chain (`devnet`).

Option (1) and (2) leverage Dockerized instances of Iroh, Fendermint, CometBFT, and ancillary
services. All of this logic is located in the `deploy_subnet` directory and described
[here](./deploy_subnet/README.md) in more detail. Option (3) requires you to have various
dependencies running directly on your host machine, so there's a bit of manual setup required.

## Usage

Regardless of the target environment, a three node network is started with a single entrypoint
script. All the dependencies and Dockerized node startup logic are handled in the `deploy.sh`
script, which you can pass a `localnet` argument to run a localnet—or run `make run-localnet` from
the root of this repo. Before getting started, you'll need to install the build dependencies for
your OS.

### Build dependencies

You'll need the following dependencies installed on your machine:

- `rustup`
- `cargo make`
- `toml-cli`
- `foundry`
- `node`
- `docker`
- `jq`

When you run `deploy.sh`, it _will_ check for the existence of these dependencies. For Linux
machines, the script _will also_ handle installation for all build dependencies. For macOS, it _will
not_ automatically install them. Instead, you'll have to do this manually, but the script _will_ log
and let you know what you're missing before proceeding. The section below outlines how to do this
for macOS.

Optionally, you can pass the `SKIP_DEPENDENCIES=true` environment variable to `deploy.sh` to skip
this entirely (e.g., if you already have these installed).

Also optional is the `hoku` CLI, which (if installed) will pre-buy credits for all accounts in the
localnet subnet setup. Follow the instructions in the `rust-hoku` repo to install it:
[here](https://github.com/hokunet/rust-hoku).

#### Linux

The `deploy.sh` will handle all the build dependencies for a Linux machine.

#### macOS

You'll need to install the following dependencies if they are not already available:

- Xcode from App Store or terminal: `xcode-select --install`
- Homebrew: Required for installing `jq` and possibly other dependencies. See the official Homebrew
  docs [here](https://brew.sh/) (but it's probably already installed).
- `docker`: Required to run the Dockerized nodes. See the official Docker docs
  [here](https://docs.docker.com/desktop/install/mac-install).
- `jq`: Needed for much of the JSON parsing logic when working with configuration files.
  ```shell
  brew install jq
  ```
- `rustup`: Required for building the Docker images (i.e., most of the stack is written in Rust).
  See the official Rust docs [here](https://www.rust-lang.org/tools/install) and make sure `cargo`
  gets installed.
  ```shell
  curl https://sh.rustup.rs -sSf | sh -s -- -y
  ```
- `cargo make`: Required for building the Docker images.
  ```shell
  cargo install cargo-make
  ```
- `toml-cli`: Needed for reading and writing various configuration files used by Docker images.
  ```shell
  cargo install toml-cli
  ```
- `foundryup`: Used for various onchain operations. See the official Foundry docs
  [here](https://book.getfoundry.sh/getting-started/installation) and make sure `cast` gets
  installed.
  ```shell
  curl -L https://foundry.paradigm.xyz | bash
  foundryup
  ```
- Node.js: Needed for compiling and deploying contracts with Hardhat. See the official Node.js docs
  [here](https://nodejs.org/en/download)—or use [nvm](https://github.com/nvm-sh/nvm) (described
  below for `bash` shells).
  ```shell
  curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
  source "$HOME/.bashrc" # This step will vary by OS
  nvm install --default lts/*
  ```

### Environment variables

All logic handled in the `deploy.sh` script uses the following environment variables, which are
defined in the `env.example` file. They are all optional but, for example, dictate what contracts
are deployed during the deployment flow:

- `IPC_FOLDER`: The path to the IPC folder (defaults to `${HOME}/ipc`). Not used for localnet
  deployments.
- `PARENT_GATEWAY_ADDRESS`: The EVM address of the parent gateway contract (default defined in
  `.ipc-cal/config.toml` or `.ipc-local/config.toml`).
- `PARENT_REGISTRY_ADDRESS`: The EVM address of the parent registry contract (default defined in
  `.ipc-cal/config.toml` or `.ipc-local/config.toml`).
- `PARENT_HTTP_AUTH_TOKEN`: An auth token for RPC calls to a [Glif.io](https://api.node.glif.io/)
  archive node for the rootnet (Filecoin Calibration)—only used if you are deploying to testnet.
- `SUPPLY_SOURCE_ADDRESS`: The address of the supply source (ERC20) for all deployed subnets.
- `FM_LOG_LEVEL`: Fendermint log level. One of `off`, `error`, `warn`, `info`, `debug`, or `trace`
  (default is `info`).

For localnet deployments, you won't need to set any of the above. There are also two additional
optional variables:

- `SKIP_DEPENDENCIES`: Skips the installation of build dependencies (see
  [Build dependencies](#build-dependencies)).
- `SKIP_BUILD`: Skips the build step for the entire stack. You **MUST** run this at least once
  before starting the network. Notably, this also installs the `ipc-cli` binary that is used heavily
  during the deployment script. After doing so, future `deploy.sh` invocations will use the existing
  build artifacts, so you can set `SKIP_BUILD=true` to save time.

Create a `.env` file with your desired values and source it in your shell:

```shell
source .env
```

Lastly, be sure to source your shell's rc file. This step will vary by OS. For example, `bash`:

```shell
source ${HOME}/.bashrc
```
